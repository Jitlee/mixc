<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>商场导购平台</title>
		<style>
			body, html {
				margin: 0;
				padding: 0;
				width: 100%;
				height: 100%;
				overflow: hidden;
			}
			
			body {
				background-image: url(img/splash.jpg);
				background-position: 50% 50%;
				background-size: cover;
				background-repeat: no-repeat;
				position:relative;
			}
			
			.center {
				color: #fff;
				width: 100%;
				text-align: center;
				position: absolute;
				top: 50%;
				transform: translateY(-50%);
				text-shadow: 0px 0px 5px #000000;
			}
			
			.center h5 {
				padding: 0;
			}
		</style>
	</head>
	<body style="background-image">
		<div class="center">
			<h1>商场导航软件</h1>
			<h5 id="msg">启动中...</h5>
		</div>
		<script type="text/javascript" src="js/checkversion.js" ></script>
		<script>
			const cv = require('./js/checkversion.js')
			cv.checkVersion((rst) => {
				if(rst < 0) {
					showMsg('检查最新版本异常')
				}
				const { remote, ipcRenderer}  = require('electron')
				const startWindow = remote.getCurrentWindow()
				ipcRenderer.send('open-main')
			}, true, (state) => {
				switch(state) {
					case 1:
						showMsg('发现新版本...')
						break
					case 2:
						showMsg('下载新版本...')
						break
					case 3:
						showMsg('解压资源中...')
						break
					case 3:
						showMsg('更新成功...')
						break
				}
			})
			
			function showMsg(msg) {
				document.getElementById("msg").innerHTML = msg
			}
		</script>
	</body>
</html>
